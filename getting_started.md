---
title: Getting Started
nav_order: 2
---

# Getting Started
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## Creating a Script

As an introduction to PSRIO, we will show you how to create PSRIO recipes from scratch using the output data from example cases inside the SDDP installation folder. The example case 20 will be used for the explanation. It consists, basically, of one system containing three thermal plants supplying energy to consumers. Twelve stages constitute the study horizon, and the execution is deterministic.

#### Example 1
{: .no_toc }

The first example is about demand's marginal cost. We want to get an average value within the stages of the file `cmgdem.csv`. Therefore, since this output is a system-level variable, we can start loading the system collections with the following command:

``` lua
system = System();
```

Then, we load the marginal cost data from the file `cmgdem.csv`:

``` lua
cmgdem = system:load("cmgdem");
```

The data can be seen in the image below:

<div style="text-align:center">
    <img src="https://services.psr-inc.com/github/psrio-docs/getting_started/cmgdem.png" width="350"/>
</div>

The processing is accomplished using the method `aggregate_stages`, with the parameter `BY_AVERAGE()`:

``` lua
cmgdem_avg = cmgdem:aggregate_stages(BY_AVERAGE());
```

We save the expression with the following method, and the PSRIO will output the `cmgdem_avg.bin` and `cmgdem_avg.hdr`.

``` lua
cmgdem_avg:save("cmgdem_avg");
```

If we want to save a CSV file, we should use the additional parameter:

``` lua
cmgdem_avg:save("cmgdem_avg", {csv=true});
```

Let's see what the final result looks like:

<div style="text-align:center">
    <img src="https://services.psr-inc.com/github/psrio-docs/getting_started/cmgdem_avg.png" width="350"/>
</div>

As we can see, the stages collapsed into one single value representing the average value of the demand marginal costs over the study horizon. 

#### Example 2
{: .no_toc }

Suppose we want to extract the total amount of energy generated by the plants based on the information received from SDDP about the generations in each stage of each plant, which we found in the file `gerter.csv`. The first step is to load the thermal collection with the following command:

``` lua 
thermal = Thermal();
```

Now, we have access to the attributes of each thermal plant in the system. As our interest lies in the generation, we will load the thermal generation data with the command:

``` lua 
gerter = thermal:load("gerter");
```

Check the data contained in the file:

<div style="text-align:center">
    <img src="https://services.psr-inc.com/github/psrio-docs/getting_started/gerter.png" width="350"/>
</div>

Notice that we managed to load the generation data by informing the filename of the output. Now, we can make operations with the thermal generation data. We want to sum the values of each plant regarding one stage so that there is only one value per stage representing the total generation of the system.

``` lua 
total_gerter = gerter:aggregate_agents(BY_SUM(), "Total thermal");

total_gerter:save("total_gerter", {csv=true});
```

The first instruction is to aggregate agents, summing their respective generations for each stage. In the subsequent command, we are saving the data stored in the variable `total_gerter` to the file `total_gerter.csv`. The processed data looks like this:

<div style="text-align:center">
    <img src="https://services.psr-inc.com/github/psrio-docs/getting_started/totalgerter.png" width="350"/>
</div>

The best way to visualize the output is by plotting the data, making one of them. First, letâ€™s define an object for the chart.

``` lua 
chart = Chart("My first chart");
```

We indicate to the chart object that we want to plot the data in the file variable `total_gerter`, which we have just created.

``` lua 
chart:add_line(total_gerter);
```

After that, we will define a dashboard object to hold chart objects information and then add the chart and save it to the file `thermal_report.html`.

``` lua 
dashboard = Dashboard("My first dashboard");
dashboard:push(chart);
dashboard:save("thermal_report");
```

By clicking in the file `thermal_report.html`, that's what we get:

<div style="text-align:center">
    <img src="https://services.psr-inc.com/github/psrio-docs/getting_started/dashboard.png" width="850"/>
</div>

In short, the recipe for this work is as follows:

```lua 
-- load thermal collections and thermal generation data
thermal = Thermal();
gerter = thermal:load("gerter");

-- aggregate agents generations by sum and save to output file
total_gerter = gerter:aggregate_agents(BY_SUM(), "Total thermal");
total_gerter:save("total_gerter", {csv=true});

-- create chart object
chart = Chart("My first chart");

-- add total generation info
chart:add_line(total_gerter);

-- create dashboad object
dashboard = Dashboard("My first dashboard");

-- add chart and save to html file
dashboard:push(chart);
dashboard:save("thermal_report");
```

There are two ways to run the script above. We are now going to explain each one of them in the next section of this tutorial.

## Running a script

### Graph 4.0

Graph 4.0 is a graphing tool that allows us to make PSRIO scripts inside an editor. After the execution of SDDP, open Graph 4.0:

<div style="text-align:center">
    <img src="images\getting_started\graph_1.png" width="600"/>
</div>

Select the PSRIO editor option in the menu located on the left side of your screen:

<div style="text-align:center">
    <img src="images\getting_started\graph_2.png" width="600"/>
</div>

You can create a new script, write down the code, save it, and then you will be ready to go.

<div style="text-align:center">
    <img src="images\getting_started\graph_3.png" width="600"/>
</div>

### SDDP

We can run a PSRIO script automatically after an SDDP execution. To do it, we need to save an `sddp.lua` file in the case folder. The SDDP model will run this script and produce the outputs and dashboard defined on it.

<div style="text-align:center">
    <img src="images\getting_started\sddp.png" width="750"/>
</div>

